# Market Making на Polymarket — заметки

## Как работает рынок Polymarket

### Базовый механизм

Каждый рынок — вопрос с двумя исходами: YES и NO. Токены YES + NO **всегда** стоят ровно $1 в сумме.

```
Покупатель YES: платит 30¢ → получает 1 YES токен
Покупатель NO:  платит 70¢ → получает 1 NO токен
Система:        собрала $1  → выпустила 1 YES + 1 NO
```

При резолюции:
- Событие произошло → YES = $1, NO = $0
- Событие не произошло → YES = $0, NO = $1

Деньги не берутся из воздуха — каждый доллар победителя это доллар проигравшего.

### Order Book (CLOB)

Polymarket работает как биржа с книгой заявок, не AMM.

### Комиссии
- **Maker (limit order)**: 0% — стимулирует ставить ордера в стакан
- **Taker (market order)**: ~2% — платишь за мгновенное исполнение

---

## Market Making с моделью fair price

Если есть модель fair price (как для землетрясений) — можно зарабатывать ставя ордера с обеих сторон:

```
Модель: fair price = 25¢
Спред:  3¢

  Buy  YES @ 22¢  (limit bid)
  Sell YES @ 28¢  (limit ask)
```

### Сценарии

**A) Спред заработан** — кто-то продал по 22¢, потом кто-то купил по 28¢ = +6¢ прибыль.

**B) Цена пошла вверх** — ask 28¢ исполнился, ты продал дороже fair = profit. Переставь ордера выше.

**C) Цена пошла вниз** — bid 22¢ исполнился, ты купил дешевле fair = profit. Переставь ордера ниже.

### Преимущество informed MM

Обычный MM не знает fair price — ставит спред вокруг рыночной цены. Если прилетит новость — застрянет с убыточной позицией.

Informed MM (с моделью) сдвигает котировки к fair price:
```
Рынок: 25¢  |  Модель: fair = 30¢
→ bid 27¢ / ask 33¢ (сдвинут к fair)
→ Bid исполняется чаще → накапливаем YES (недооценённый)
```

Фактически: направленная ставка + заработок на спреде.

### Управление inventory

```python
fair_price = model.predict("8-10 quakes 2026")  # 0.25
spread = 0.03
max_position = 500  # макс. токенов на одной стороне

bid = fair_price - spread/2  # 0.235
ask = fair_price + spread/2  # 0.265

# Если накопил слишком много одной стороны — сдвинь цену
if my_yes_tokens > max_position:
    ask -= 0.01  # разгрузить YES
if my_no_tokens > max_position:
    bid += 0.01  # разгрузить NO
```

---

## Требования для MM

### Капитал
- $200-500 свободных USDC на один рынок
- Отдельный от направленных ставок (должен быть доступен для ордеров)
- Блокируется под оба ордера (bid + ask)

### Техническое
- API ключи для CLOB (py-clob-client) — уже есть в earthquake боте
- Быстрое обновление ордеров после исполнения
- Модель fair price в реальном времени

### Экономика (идеальная)
```
Спред 4¢, оборот 50 токенов/день, один рынок:
  50 × 4¢ = $2/день

10 рынков: ~$20/день = ~$600/мес
При капитале $500 → APY ~1400%
```

### Реальность
- Мало трейдеров → не все ордера исполнятся
- Inventory risk: застрянешь с одной стороной
- Конкурирующие MM сужают спред
- На earthquake рынках мало объёма — MM заработок будет копеечный

---

## Когда MM особенно прибылен

- **Новый рынок** — спреды широкие, цены неэффективные
- **После сейсмического события** — рынок не пересчитал вероятности, а модель обновилась за секунды
- **Низкая ликвидность** — меньше конкуренции, можно ставить широкий спред

## Вывод

Для earthquake рынков с низким объёмом **направленные ставки с edge** (текущая стратегия) скорее всего выгоднее. MM имеет смысл если объёмы вырастут или на более ликвидных рынках (политика, BTC).

---

*Заметки от 2026-02-09.*
