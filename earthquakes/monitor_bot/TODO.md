# Monitor Bot - TODO List

Ð ÐµÐ°Ð»-Ñ‚Ð°Ð¹Ð¼ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð·ÐµÐ¼Ð»ÐµÑ‚Ñ€ÑÑÐµÐ½Ð¸Ð¹ Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹ Ð² TUI Ð¸ Ð·Ð°Ð¿Ð¸ÑÑŒÑŽ Ð² PostgreSQL.

## Phase 1: Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ° âœ“

### 1.1 Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
- [ ] Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð² monitor_bot/
- [ ] requirements.txt Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÐ¼Ð¸
- [ ] config.py Ð´Ð»Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ (DB, Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸, Ð¿Ð¾Ñ€Ð¾Ð³Ð¸)
- [ ] __main__.py entry point

### 1.2 PostgreSQL Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ
- [ ] Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð‘Ð” Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ (schema.sql)
- [ ] ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº PostgreSQL Ñ‡ÐµÑ€ÐµÐ· asyncpg
- [ ] Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸/Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ð¸Ð· Ð‘Ð”

### 1.3 TUI Interface (Textual)
- [ ] ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐºÑ€Ð°Ð½ (Header + Footer + Main Panel)
- [ ] Status Bar:
  - ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²
  - ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
  - Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð·Ð° ÑÐµÑÑÐ¸ÑŽ (Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹, Ð² Ð‘Ð”)
- [ ] Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹:
  - ÐšÐ¾Ð»Ð¾Ð½ÐºÐ¸: Magnitude | Location | Sources | Detected | USGS Published | Edge Time
  - Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (Ð½Ð¾Ð²Ñ‹Ðµ ÑÐ²ÐµÑ€Ñ…Ñƒ)
  - Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð¾Ðµ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ:
    - ðŸ”´ M7.0+ (ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹/bold)
    - ðŸŸ  M6.5-6.9 (Ð¾Ñ€Ð°Ð½Ð¶ÐµÐ²Ñ‹Ð¹)
    - ðŸŸ¡ M6.0-6.4 (Ð¶Ñ‘Ð»Ñ‚Ñ‹Ð¹)
    - Ð—ÐµÐ»Ñ‘Ð½Ñ‹Ð¹ Ñ„Ð¾Ð½ ÐµÑÐ»Ð¸ Edge Time > 10 Ð¼Ð¸Ð½ÑƒÑ‚
- [ ] Ð›Ð¾Ð³ Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑÐ½Ð¸Ð·Ñƒ:
  - Real-time Ð»Ð¾Ð³ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (Ð½Ð¾Ð²Ñ‹Ðµ Ñ€ÐµÐ¿Ð¾Ñ€Ñ‚Ñ‹, ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ)

### 1.4 Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ collectors
- [ ] Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ monitor/collectors/*
- [ ] Event matching Ñ‡ÐµÑ€ÐµÐ· EventMatcher
- [ ] Ð—Ð°Ð¿Ð¸ÑÑŒ Ð² Ð‘Ð” Ñ‡ÐµÑ€ÐµÐ· database.py
- [ ] ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ UI Ð¿Ñ€Ð¸ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸ÑÑ…

### 1.5 Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- [ ] Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ñ PostgreSQL
- [ ] ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ 5 Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² (JMA, EMSC, GFZ, GeoNet, USGS)
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ deduplication (Ð¾Ð´Ð½Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¾Ñ‚ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²)
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ UI Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð² real-time
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ð‘Ð”

## Phase 2: ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ

### 2.1 Database Migrations
- [ ] Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ migrations/ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
- [ ] 001_initial_schema.sql - ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†
- [ ] Migration runner ÑÐºÑ€Ð¸Ð¿Ñ‚ (apply_migrations.py)
- [ ] Rollback Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°
- [ ] README Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼Ð¸ Ð¿Ð¾ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑÐ¼

### 2.2 Configuration Management
- [ ] .env.example Ð´Ð»Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°
- [ ] Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸ ÑÑ‚Ð°Ñ€Ñ‚Ðµ
- [ ] ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº

### 2.3 Deployment Scripts
- [ ] install.sh Ð´Ð»Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
- [ ] run_monitor_bot.sh Ð·Ð°Ð¿ÑƒÑÐº ÑÐºÑ€Ð¸Ð¿Ñ‚
- [ ] Systemd service Ñ„Ð°Ð¹Ð» (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

### 2.4 Monitoring & Logging
- [ ] Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð² Ñ„Ð°Ð¹Ð» (monitor_bot.log)
- [ ] Log rotation
- [ ] Error handling Ð¸ graceful shutdown
- [ ] Health check endpoint (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

## Phase 3: Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

### 3.1 Advanced Features
- [ ] Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹: Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ M6.5+, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ pending, Ð¸ Ñ‚.Ð´.
- [ ] Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… (CSV, JSON)
- [ ] Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°Ð¼ (ÐºÑ‚Ð¾ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð²ÑÐµÑ…)
- [ ] Ð“Ñ€Ð°Ñ„Ð¸Ðº edge time distribution

### 3.2 Alerts
- [ ] Ð—Ð²ÑƒÐºÐ¾Ð²Ð¾Ð¹ Ð°Ð»ÐµÑ€Ñ‚ Ð¿Ñ€Ð¸ M7.0+
- [ ] Telegram ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
- [ ] Discord webhook (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

### 3.3 Market Integration
- [ ] ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ market_reactions
- [ ] ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ½ Polymarket Ð¿Ñ€Ð¸ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ð¸
- [ ] Potential trade signals

---

## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

### ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ€Ð¾Ð³ Ð¼Ð°Ð³Ð½Ð¸Ñ‚ÑƒÐ´Ñ‹
**M6.0** - Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±Ð°Ð»Ð°Ð½Ñ:
- Ð”Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ñ€ÐµÐ´ÐºÐ¾ (Ð½Ðµ Ð·Ð°ÑÐ¾Ñ€Ð¸Ñ‚ UI)
- Ð”Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ñ‡Ð°ÑÑ‚Ð¾ (Ð¿Ð¾ÐºÐ°Ð¶ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹)
- Ð ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ð¾ Ð´Ð»Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸ (Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ð»Ð¸ÑÑ‚ÑŒ Ð½Ð° M7+ Ñ€Ñ‹Ð½ÐºÐ¸)

### UI Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Earthquake Monitor Bot                                    Q: Quit   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: Running | Sources: 5 active | Events: 12 | Pending: 2      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ Recent Earthquakes (M6.0+)                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Mag  â”‚ Location              â”‚ Srcs â”‚ Detected  â”‚ USGS   â”‚Edgeâ”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ M7.2 â”‚ Near coast of Japan   â”‚  3   â”‚ 14:23:15  â”‚ Pendingâ”‚ -  â”‚  â”‚
â”‚ â”‚ M6.8 â”‚ Tonga region          â”‚  2   â”‚ 14:15:42  â”‚ 14:28  â”‚12m â”‚  â”‚
â”‚ â”‚ M6.4 â”‚ Chile                 â”‚  1   â”‚ 13:55:10  â”‚ 14:02  â”‚ 7m â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚ Activity Log                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 14:23:15 [JMA] New M7.2 at Near coast of Japan               â”‚  â”‚
â”‚ â”‚ 14:23:45 [EMSC] Matched M7.2 to existing event (2 sources)   â”‚  â”‚
â”‚ â”‚ 14:24:10 [GFZ] Matched M7.2 to existing event (3 sources)    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Strategy
- **Local dev**: PostgreSQL Ð½Ð° Windows host (172.24.192.1)
- **Server deploy**: ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ð‘Ð”, ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· .env
- **Migrations**: SQL Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð²ÐµÑ€ÑÐ¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÑÑ…ÐµÐ¼Ñ‹

### Color Scheme
- M7.0+: `[bold red]` + sound alert
- M6.5-6.9: `[bold yellow]`
- M6.0-6.4: `[cyan]`
- Edge > 10 min: `[on green]` background
- Pending USGS: `[italic]`
